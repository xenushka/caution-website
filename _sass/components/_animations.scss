// ==========================================================================
// COMPONENTS: ANIMATIONS & EFFECTS
// ==========================================================================

@use "../abstracts/variables" as *;
@use "../abstracts/mixins" as *;

// ------------------------------------------------------------
// Fade In Animation
// ------------------------------------------------------------
@keyframes fadeIn {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}

.fade-in {
	opacity: 0;
	animation: fadeIn ease 1.1s forwards;
}

// ------------------------------------------------------------
// Waves Background Effect
// ------------------------------------------------------------
.waves-container {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	z-index: 1;
	pointer-events: none;
}

a-waves {
	--x: -0.5rem;
	--y: 50%;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	overflow: hidden;

	&:before {
		position: absolute;
		top: 0;
		left: 0;
		width: 0.5rem;
		height: 0.5rem;
		background: #1a1a1a;
		border-radius: 50%;
		transform: translate3d(calc(var(--x) - 50%), calc(var(--y) - 50%), 0);
		will-change: transform;
		content: "";
		opacity: 0.5;
		pointer-events: auto;
	}

	svg {
		display: block;
		width: 100%;
		height: 100%;

		path {
			fill: none;
			stroke: #1a1a1a;
			stroke-width: 1px;
			opacity: 0.5;
		}
	}
}

// ------------------------------------------------------------
// Glitch Effect (Cybersecurity Aesthetic)
// ------------------------------------------------------------
@keyframes glitch-1 {
	0%,
	100% {
		transform: translate(0);
	}
	20% {
		transform: translate(-2px, 2px);
	}
	40% {
		transform: translate(-2px, -2px);
	}
	60% {
		transform: translate(2px, 2px);
	}
	80% {
		transform: translate(2px, -2px);
	}
}

@keyframes glitch-2 {
	0%,
	100% {
		transform: translate(0);
	}
	20% {
		transform: translate(2px, -2px);
	}
	40% {
		transform: translate(2px, 2px);
	}
	60% {
		transform: translate(-2px, -2px);
	}
	80% {
		transform: translate(-2px, 2px);
	}
}

@keyframes glitch-text {
	0% {
		text-shadow: 0.05em 0 0 rgba(255, 0, 0, 0.75),
			-0.025em -0.05em 0 rgba(0, 255, 0, 0.75),
			0.025em 0.05em 0 rgba(0, 0, 255, 0.75);
	}
	14% {
		text-shadow: 0.05em 0 0 rgba(255, 0, 0, 0.75),
			-0.025em -0.05em 0 rgba(0, 255, 0, 0.75),
			0.025em 0.05em 0 rgba(0, 0, 255, 0.75);
	}
	15% {
		text-shadow: -0.05em -0.025em 0 rgba(255, 0, 0, 0.75),
			0.025em 0.025em 0 rgba(0, 255, 0, 0.75),
			-0.05em -0.05em 0 rgba(0, 0, 255, 0.75);
	}
	49% {
		text-shadow: -0.05em -0.025em 0 rgba(255, 0, 0, 0.75),
			0.025em 0.025em 0 rgba(0, 255, 0, 0.75),
			-0.05em -0.05em 0 rgba(0, 0, 255, 0.75);
	}
	50% {
		text-shadow: 0.025em 0.05em 0 rgba(255, 0, 0, 0.75),
			0.05em 0 0 rgba(0, 255, 0, 0.75), 0 -0.05em 0 rgba(0, 0, 255, 0.75);
	}
	99% {
		text-shadow: 0.025em 0.05em 0 rgba(255, 0, 0, 0.75),
			0.05em 0 0 rgba(0, 255, 0, 0.75), 0 -0.05em 0 rgba(0, 0, 255, 0.75);
	}
	100% {
		text-shadow: -0.025em 0 0 rgba(255, 0, 0, 0.75),
			-0.025em -0.025em 0 rgba(0, 255, 0, 0.75),
			-0.025em -0.05em 0 rgba(0, 0, 255, 0.75);
	}
}

.glitch {
	position: relative;
	display: inline-block;
	color: #ff3333;
	font-weight: 600;
	animation: glitch-text 2.5s infinite;

	&:before,
	&:after {
		content: attr(data-text);
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: transparent;
	}

	&:before {
		animation: glitch-1 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
		color: #00ffff;
		z-index: -1;
		clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%);
	}

	&:after {
		animation: glitch-2 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite
			reverse;
		color: #ff00ff;
		z-index: -2;
		clip-path: polygon(0 55%, 100% 55%, 100% 100%, 0 100%);
	}
}

// Variation: glitch only on hover/intermittent
.glitch-hover {
	position: relative;
	display: inline-block;
	transition: color 0.3s ease;

	&:hover {
		animation: glitch-text 0.5s;
		color: #ff3333;
	}
}

// ------------------------------------------------------------
// Marker Highlight Effect
// ------------------------------------------------------------
.marker-highlight {
	position: relative;
	display: inline;
	background: linear-gradient(
			104deg,
			rgba(130, 255, 173, 0) 0.9%,
			rgba(130, 255, 173, 1.25) 2.4%,
			rgba(130, 255, 173, 0.5) 5.8%,
			rgba(130, 255, 173, 0.1) 93%,
			rgba(130, 255, 173, 0.7) 96%,
			rgba(130, 255, 173, 0) 98%
		),
		linear-gradient(
			183deg,
			rgba(130, 255, 173, 0) 0%,
			rgba(130, 255, 173, 0.3) 7.9%,
			rgba(130, 255, 173, 0) 15%
		);
	background-size: 100% 100%;
	background-position: 0 0;
	background-repeat: no-repeat;
	padding: 0.1em 0.25em;
	box-decoration-break: clone;
	-webkit-box-decoration-break: clone;
}

// Variation: Blue marker
.marker-highlight--blue {
	background: linear-gradient(
			104deg,
			rgba(130, 200, 255, 0) 0.9%,
			rgba(130, 200, 255, 1.25) 2.4%,
			rgba(130, 200, 255, 0.5) 5.8%,
			rgba(130, 200, 255, 0.1) 93%,
			rgba(130, 200, 255, 0.7) 96%,
			rgba(130, 200, 255, 0) 98%
		),
		linear-gradient(
			183deg,
			rgba(130, 200, 255, 0) 0%,
			rgba(130, 200, 255, 0.3) 7.9%,
			rgba(130, 200, 255, 0) 15%
		);
	background-size: 100% 100%;
	background-position: 0 0;
	background-repeat: no-repeat;
	padding: 0.1em 0.25em;
	box-decoration-break: clone;
	-webkit-box-decoration-break: clone;
}

// Variation: Yellow marker
.marker-highlight--yellow {
	background: linear-gradient(
			104deg,
			rgba(255, 230, 130, 0) 0.9%,
			rgba(255, 230, 130, 1.25) 2.4%,
			rgba(255, 230, 130, 0.5) 5.8%,
			rgba(255, 230, 130, 0.1) 93%,
			rgba(255, 230, 130, 0.7) 96%,
			rgba(255, 230, 130, 0) 98%
		),
		linear-gradient(
			183deg,
			rgba(255, 230, 130, 0) 0%,
			rgba(255, 230, 130, 0.3) 7.9%,
			rgba(255, 230, 130, 0) 15%
		);
	background-size: 100% 100%;
	background-position: 0 0;
	background-repeat: no-repeat;
	padding: 0.1em 0.25em;
	box-decoration-break: clone;
	-webkit-box-decoration-break: clone;
}

// ------------------------------------------------------------
// 3D Rotating Cube (Black Box Theme)
// ------------------------------------------------------------
.cube_wrapper {
	transform: rotateX(-30deg) translateX(-50%) translateZ(0);
	margin: 5rem auto;
	left: 50%;
	position: relative;
	transform-style: preserve-3d;
	min-height: 300px;
	will-change: transform;
	-webkit-backface-visibility: hidden;
	-webkit-perspective: 1000;

	@include media-mobile {
		min-height: 200px;
		margin: 4rem auto;
	}
}

// Hero cube positioning
.hero-cube {
	position: absolute;
	right: 5%;
	top: 50%;
	transform: rotateX(-30deg) translateY(-50%) translateZ(0);
	margin: 0;
	left: auto;
	min-height: 300px;

	@include media-tablet {
		right: 2%;
		top: 60%;
	}

	@include media-mobile {
		position: relative;
		right: auto;
		top: auto;
		transform: rotateX(-30deg) translateX(-50%) translateZ(0);
		left: 50%;
		margin: 4rem auto;
		min-height: 200px;
	}

	// Transparent glass styling for hero cube faces
	.cube_face {
		background-color: color-mix(in srgb, #c7e8ff 12%, transparent);
		color: transparent;
		border: 0.5px solid #c7e8ff;
		backdrop-filter: blur(6px) saturate(130%);
		-webkit-backdrop-filter: blur(6px) saturate(130%);
		box-shadow: /* soft inner edge highlight */ inset 0 0 0 1px
				color-mix(in srgb, #c7e8ff 60%, transparent),
			/* gentle inner glow, no dark tint */ inset 0 0 16px 0
				color-mix(in srgb, #a3f1fc 20%, transparent),
			/* subtle outer lift */ 0 4px 12px rgba(0, 0, 0, 0.05);
	}
}

// Dark cube positioning
.dark-cube {
	// Center within grid column
	left: 0;
	right: 0;
	margin-left: auto;
	margin-right: auto;
	transform: rotateX(-30deg) translateZ(0);

	@include media-mobile {
		order: 1;
		left: 50%;
		transform: rotateX(-30deg) translateX(-50%) translateZ(0);
	}
}

.cube {
	transition: all 0.3s ease;
	height: 300px;
	width: 300px;
	transform: rotateY(-45deg) translateZ(0);
	transform-style: preserve-3d;
	animation: cube_rotate 12s infinite cubic-bezier(0.4, 0, 0.2, 1);
	margin: 0 auto;
	will-change: transform;
	-webkit-backface-visibility: hidden;
	backface-visibility: hidden;

	@include media-mobile {
		height: 200px;
		width: 200px;
	}
}

.cube_face {
	color: #00ff26;
	background: rgb(20, 20, 20);
	border: solid 1px #404040;
	position: absolute;
	transform-style: preserve-3d;
	box-sizing: border-box;
	backface-visibility: hidden;
	-webkit-backface-visibility: hidden;
	height: 300px;
	width: 300px;
	display: flex;
	align-items: center;
	justify-content: center;
	text-align: center;
	font-family: "Geist Mono", monospace;
	font-size: clamp(1rem, 8vw, 1.5rem);
	font-weight: 400;
	line-height: 1.2;
	padding: 1rem;
	will-change: transform;
	word-break: break-word;
	hyphens: auto;

	@include media-mobile {
		height: 200px;
		width: 200px;
		font-size: clamp(0.85rem, 6vw, 1.2rem);
		padding: 0.75rem;
	}
}

.cube .cube_face:nth-child(1) {
	transform: rotateX(90deg) rotateY(0deg) translateZ(150px);
	filter: brightness(90%);
	font-size: 9rem;

	@include media-mobile {
		transform: rotateX(90deg) rotateY(0deg) translateZ(100px);
		font-size: 6rem;
	}
}

.cube .cube_face:nth-child(2) {
	transform: rotateX(0deg) rotateY(0deg) translateZ(150px);
	filter: brightness(80%);
	font-size: 9rem;

	@include media-mobile {
		transform: rotateX(0deg) rotateY(0deg) translateZ(100px);
		font-size: 6rem;
	}
}

.cube .cube_face:nth-child(3) {
	transform: rotateX(0deg) rotateY(90deg) translateZ(150px);
	filter: brightness(70%);
	font-size: 9rem;

	@include media-mobile {
		transform: rotateX(0deg) rotateY(90deg) translateZ(100px);
		font-size: 6rem;
	}
}

.cube .cube_face:nth-child(4) {
	transform: rotateX(0deg) rotateY(180deg) rotateZ(180deg) translateZ(150px);
	filter: brightness(80%);
	font-size: 9rem;

	@include media-mobile {
		transform: rotateX(0deg) rotateY(180deg) rotateZ(180deg) translateZ(100px);
		font-size: 6rem;
	}
}

.cube .cube_face:nth-child(5) {
	transform: rotateX(0deg) rotateY(270deg) rotateZ(180deg) translateZ(150px);
	filter: brightness(70%);
	font-size: 9rem;

	@include media-mobile {
		transform: rotateX(0deg) rotateY(270deg) rotateZ(180deg) translateZ(100px);
		font-size: 6rem;
	}
}

.cube .cube_face:nth-child(6) {
	transform: rotateX(-90deg) rotateY(0deg) translateZ(150px);
	filter: brightness(60%);
	font-size: 9rem;

	@include media-mobile {
		transform: rotateX(-90deg) rotateY(0deg) translateZ(100px);
		font-size: 6rem;
	}
}

@keyframes cube_rotate {
	0% {
		transform: rotateY(-45deg);
	}
	16.7% {
		transform: rotateY(-45deg) rotateX(-90deg);
	}
	33.3% {
		transform: rotateY(-45deg) rotateX(-90deg) rotateZ(90deg) rotateX(0deg);
	}
	50% {
		transform: rotateY(-45deg) rotateX(-90deg) rotateZ(90deg) rotateX(-90deg);
	}
	66.7% {
		transform: rotateY(-45deg) rotateX(-90deg) rotateZ(90deg) rotateX(-90deg)
			rotateZ(90deg) rotateX(0deg);
	}
	83.3% {
		transform: rotateY(-45deg) rotateX(-90deg) rotateZ(90deg) rotateX(-90deg)
			rotateZ(90deg) rotateX(-90deg);
	}
	100% {
		transform: rotateY(-45deg) rotateX(-90deg) rotateZ(90deg) rotateX(-90deg)
			rotateZ(90deg) rotateX(-90deg) rotateZ(90deg);
	}
}
